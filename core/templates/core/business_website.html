<!-- makarna_project/core/templates/core/business_website.html -->

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ website.website_title|default:business.name }}</title>
    <meta name="description" content="{{ website.website_description|default:'Restoran web sitesi' }}">
    <meta name="keywords" content="{{ website.website_keywords|default:'restoran, yemek, menü' }}">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '{{ website.primary_color|default:"#3B82F6" }}',
                        secondary: '{{ website.secondary_color|default:"#10B981" }}'
                    }
                }
            }
        }
    </script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Custom Styles -->
    <style>
        .hero-gradient {
            background: linear-gradient(135deg, {{ website.primary_color|default:"#3B82F6" }} 0%, {{ website.secondary_color|default:"#10B981" }} 100%);
        }
        .section-divider {
            background: linear-gradient(90deg, transparent, {{ website.primary_color|default:"#3B82F6" }}, transparent);
            height: 2px;
        }
        .menu-card:hover {
            transform: translateY(-5px);
            transition: transform 0.3s ease;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    {% if business.logo_url %}
                        <img src="{{ business.logo_url }}" alt="{{ business.name }}" class="h-10 w-auto">
                    {% endif %}
                    <span class="ml-3 text-xl font-bold text-gray-800">{{ business.name }}</span>
                </div>
                <div class="flex items-center space-x-8">
                    <a href="#about" class="text-gray-600 hover:text-primary transition duration-300">Hakkımızda</a>
                    {% if website.show_menu %}
                        <a href="#menu" class="text-gray-600 hover:text-primary transition duration-300">Menü</a>
                    {% endif %}
                    {% if website.show_contact %}
                        <a href="#contact" class="text-gray-600 hover:text-primary transition duration-300">İletişim</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-gradient text-white py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-6">{{ business.name }}</h1>
            <p class="text-xl md:text-2xl mb-8 opacity-90">{{ website.about_title|default:"Hoş Geldiniz" }}</p>
            {% if website.show_menu %}
                <a href="#menu" class="bg-white text-primary px-8 py-3 rounded-full font-semibold hover:bg-gray-100 transition duration-300">
                    Menümüzü İnceleyin
                </a>
            {% endif %}
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">{{ website.about_title|default:"Hakkımızda" }}</h2>
                <div class="section-divider mx-auto w-24 mb-8"></div>
            </div>
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div>
                    {% if website.about_description %}
                        <p class="text-lg text-gray-600 leading-relaxed">{{ website.about_description|linebreaks }}</p>
                    {% else %}
                        <p class="text-lg text-gray-600 leading-relaxed">
                            {{ business.name }} olarak, müşterilerimize en kaliteli hizmeti sunmak için çalışıyoruz.
                            Lezzetli yemeklerimiz ve sıcak atmosferimizle sizleri ağırlamaktan mutluluk duyarız.
                        </p>
                    {% endif %}
                </div>
                <div class="text-center">
                    {% if website.about_image %}
                        <img src="{{ website.about_image }}" alt="Hakkımızda" class="rounded-lg shadow-lg max-w-full h-auto">
                    {% else %}
                        <div class="bg-gray-200 rounded-lg h-64 flex items-center justify-center">
                            <i class="fas fa-utensils text-6xl text-gray-400"></i>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>

    <!-- Menu Section -->
    {% if website.show_menu %}
    <section id="menu" class="py-16 bg-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">Menümüz</h2>
                <div class="section-divider mx-auto w-24 mb-8"></div>
            </div>
            <div id="menu-container" class="space-y-12">
                <div class="text-center">
                    <i class="fas fa-spinner fa-spin text-4xl text-primary"></i>
                    <p class="mt-4 text-gray-600">Menü yükleniyor...</p>
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Contact Section -->
    {% if website.show_contact %}
    <section id="contact" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">İletişim</h2>
                <div class="section-divider mx-auto w-24 mb-8"></div>
            </div>
            <div class="grid md:grid-cols-2 gap-12">
                <!-- İletişim Bilgileri -->
                <div class="space-y-6">
                    {% if website.contact_address %}
                    <div class="flex items-start">
                        <i class="fas fa-map-marker-alt text-primary text-xl mt-1 mr-4"></i>
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">Adres</h4>
                            <p class="text-gray-600">{{ website.contact_address|linebreaks }}</p>
                        </div>
                    </div>
                    {% endif %}

                    {% if website.contact_phone %}
                    <div class="flex items-start">
                        <i class="fas fa-phone text-primary text-xl mt-1 mr-4"></i>
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">Telefon</h4>
                            <p class="text-gray-600">{{ website.contact_phone }}</p>
                        </div>
                    </div>
                    {% endif %}

                    {% if website.contact_email %}
                    <div class="flex items-start">
                        <i class="fas fa-envelope text-primary text-xl mt-1 mr-4"></i>
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">E-posta</h4>
                            <p class="text-gray-600">{{ website.contact_email }}</p>
                        </div>
                    </div>
                    {% endif %}

                    {% if website.contact_working_hours %}
                    <div class="flex items-start">
                        <i class="fas fa-clock text-primary text-xl mt-1 mr-4"></i>
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-1">Çalışma Saatleri</h4>
                            <p class="text-gray-600">{{ website.contact_working_hours|linebreaks }}</p>
                        </div>
                    </div>
                    {% endif %}

                    <!-- Sosyal Medya -->
                    <div class="flex space-x-4 pt-4">
                        {% if website.facebook_url %}
                            <a href="{{ website.facebook_url }}" target="_blank" class="text-primary hover:text-secondary transition duration-300">
                                <i class="fab fa-facebook text-2xl"></i>
                            </a>
                        {% endif %}
                        {% if website.instagram_url %}
                            <a href="{{ website.instagram_url }}" target="_blank" class="text-primary hover:text-secondary transition duration-300">
                                <i class="fab fa-instagram text-2xl"></i>
                            </a>
                        {% endif %}
                        {% if website.twitter_url %}
                            <a href="{{ website.twitter_url }}" target="_blank" class="text-primary hover:text-secondary transition duration-300">
                                <i class="fab fa-twitter text-2xl"></i>
                            </a>
                        {% endif %}
                    </div>
                </div>

                <!-- Harita -->
                {% if website.show_map and website.has_location %}
                <div>
                    <div id="map" class="h-96 rounded-lg shadow-lg bg-gray-200 flex items-center justify-center">
                        <div class="text-center">
                            <i class="fas fa-map text-4xl text-gray-400 mb-4"></i>
                            <p class="text-gray-600">Harita yükleniyor...</p>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Footer -->
    <footer class="hero-gradient text-white py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; 2024 {{ business.name }}. Tüm hakları saklıdır.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // API URL'ini template'ten al
        const API_URL = '{{ api_url }}';

        // Sayfa yüklendiğinde menüyü çek
        document.addEventListener('DOMContentLoaded', function() {
            loadMenuData();
            {% if website.show_map and website.has_location %}
                initMap();
            {% endif %}
        });

        // Menü verilerini yükle
        async function loadMenuData() {
            {% if website.show_menu %}
            try {
                const response = await fetch(API_URL);
                const data = await response.json();

                if (data.menu && Object.keys(data.menu).length > 0) {
                    displayMenu(data.menu);
                } else {
                    document.getElementById('menu-container').innerHTML =
                        '<p class="text-center text-gray-600">Henüz menü eklenmemiş.</p>';
                }
            } catch (error) {
                console.error('Menü yüklenirken hata', error);
                document.getElementById('menu-container').innerHTML =
                    '<p class="text-center text-red-600">Menü yüklenirken hata oluştu.</p>';
            }
            {% endif %}
        }

        // Menüyü görüntüle
        function displayMenu(menu) {
            const container = document.getElementById('menu-container');
            container.innerHTML = '';

            Object.keys(menu).forEach(categoryName => {
                const categoryItems = menu[categoryName];

                const categorySection = document.createElement('div');
                categorySection.className = 'mb-12';

                categorySection.innerHTML = `
                    <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">${categoryName}</h3>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${categoryItems.map(item => `
                            <div class="menu-card bg-white rounded-lg shadow-lg overflow-hidden">
                                <div class="h-48 bg-gray-200 flex items-center justify-center">
                                    ${item.image
                                        ? `<img src="${item.image}" alt="${item.name}" class="h-full w-full object-cover">`
                                        : '<i class="fas fa-utensils text-4xl text-gray-400"></i>'
                                    }
                                </div>
                                <div class="p-6">
                                    <h4 class="text-xl font-semibold text-gray-800 mb-2">${item.name}</h4>
                                    <p class="text-gray-600 mb-4 text-sm">${item.description || ''}</p>
                                    <div class="flex justify-between items-center">
                                        <span class="text-lg font-bold text-primary">
                                            ${item.price ? `${item.price.toFixed(2)} TL` : 'Fiyat Bilgisi Yok'}
                                        </span>
                                        ${item.is_campaign_bundle
                                            ? '<span class="bg-secondary text-white px-2 py-1 rounded-full text-xs">Kampanya</span>'
                                            : ''
                                        }
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;

                container.appendChild(categorySection);
            });
        }

        // Haritayı başlat
        function initMap() {
            {% if website.show_map and website.has_location %}
            // Google Maps API key'iniz varsa Google Maps kullanabilirsiniz
            // Şimdilik basit bir harita gösterimi
            const mapElement = document.getElementById('map');
            const lat = {{ website.map_latitude }};
            const lng = {{ website.map_longitude }};

            mapElement.innerHTML = `
                <div class="h-full w-full bg-gray-300 rounded-lg flex items-center justify-center">
                    <div class="text-center">
                        <i class="fas fa-map-marker-alt text-4xl text-red-500 mb-2"></i>
                        <p class="text-gray-700 font-semibold">{{ business.name }}</p>
                        <p class="text-sm text-gray-600">Konum ${lat}, ${lng}</p>
                        <a href="https://www.google.com/maps?q=${lat},${lng}"
                           target="_blank"
                           class="inline-block mt-2 bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition duration-300">
                            Google Maps'te Aç
                        </a>
                    </div>
                </div>
            `;
            {% endif %}
        }

        // Smooth scroll navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>